[phases.setup]
nixPkgs = ["python39"]
aptPkgs = [
  "libgtk-3-0", "libnss3", "libdbus-glib-1-2", "libxt6", 
  "libxcomposite1", "libxdamage1", "libxrandr2", "libgbm1", 
  "libasound2", "libpangocairo-1.0-0", "libpango-1.0-0", 
  "libcairo2", "libatspi2.0-0", "libatk1.0-0", "libatk-bridge2.0-0", 
  "libcups2", "libdrm2", "libxkbcommon0", "libxshmfence1"
]

[phases.install]
cmds = [
  "pip install -r requirements.txt",
  "playwright install firefox",
  "playwright install-deps"
]

[start]
cmd = "gunicorn --bind 0.0.0.0:$PORT --workers 1 --timeout 120 app:app"